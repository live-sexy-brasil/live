<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Live Streaming</title>
    <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/2.1.0/uicons-solid-straight/css/uicons-solid-straight.css">
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            height: 100%;
            overflow: hidden;
            background: #000;
        }

        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }

        .main-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100dvh;
            overflow: hidden;
            background: #000;
            z-index: 10;
            transition: filter 0.4s ease;
        }

        .main-container.blur {
            filter: blur(8px);
            pointer-events: none;
        }

        .video-container {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .video-background {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        /* --- Elementos da live (mantidos iguais) --- */
        .live-time {
            position: absolute;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            color: #ffffff;
            font-size: 14px;
            font-weight: 900;
            z-index: 20;
            text-shadow: 0 0 8px rgba(0,0,0,0.7);
            font-family: 'Courier New', monospace;
            letter-spacing: 1px;
            background: rgba(0,0,0,0.4);
            padding: 4px 12px;
            border-radius: 30px;
            backdrop-filter: blur(4px);
            opacity: 1;
            pointer-events: none;
            white-space: nowrap;
        }

        .left-stats {
            position: absolute;
            top: 15px;
            left: 15px;
            z-index: 20;
            display: flex;
            flex-direction: column;
            gap: 8px;
            opacity: 1;
            pointer-events: none;
        }

        .viewer-count {
            background: rgba(0, 0, 0, 0.7);
            color: #f0f0f0;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            white-space: nowrap;
        }

        .right-stats {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 8px;
            z-index: 20;
            opacity: 1;
            pointer-events: none;
        }

        .live-badge {
            background: linear-gradient(to right, #ff0000, #ff3333);
            color: #ffffff;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 3px 10px rgba(255, 0, 0, 0.4);
            white-space: nowrap;
        }

        .live-pulse {
            width: 8px;
            height: 8px;
            background: #ffffff;
            border-radius: 50%;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(0.8); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.7; }
        }

        /* --- Wrapper do 치udio (coluna) --- */
        .audio-wrapper {
            position: absolute;
            top: 70px;
            right: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            z-index: 20;
            pointer-events: auto;
        }

        .audio-control {
            width: 76px;
            height: 76px;
            border-radius: 50%;
            background: rgba(255, 105, 180, 0.9);
            border: 3px solid #FF00FF;
            color: #ffffff;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 32px;
            box-shadow: 0 0 15px rgba(255, 105, 180, 0.7);
            opacity: 1;
        }

        .audio-control.pulsing {
            animation: audioPulse 1.5s infinite ease-in-out;
        }

        @keyframes audioPulse {
            0% {
                box-shadow: 0 0 10px #FF1493, 0 0 20px #FF1493;
                transform: scale(1);
            }
            50% {
                box-shadow: 0 0 25px #FF1493, 0 0 40px #FF1493;
                transform: scale(1.08);
            }
            100% {
                box-shadow: 0 0 10px #FF1493, 0 0 20px #FF1493;
                transform: scale(1);
            }
        }

        .audio-control:active {
            transform: scale(0.95);
        }

        .audio-control.inactive {
            background: rgba(0, 0, 0, 0.7);
            border: 3px solid rgba(255, 255, 255, 0.3);
            box-shadow: none;
        }

        .audio-icon-inactive {
            position: relative;
            color: rgba(255, 255, 255, 0.7);
        }

        .audio-icon-inactive::after {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(45deg);
            width: 40px;
            height: 3px;
            background-color: #ff3333;
            border-radius: 2px;
        }

        .audio-label {
            color: #ffffff;
            font-size: 14px;
            font-weight: 500;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            letter-spacing: 1px;
            white-space: nowrap;
            opacity: 0.9;
        }

        /* --- Coment치rios --- */
        .comments-section {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 15px;
            z-index: 20;
            pointer-events: none;
            opacity: 1;
        }

        .comments-container {
            height: 150px;
            overflow: hidden;
            margin-bottom: 10px;
            position: relative;
        }

        .comment {
            color: #ffffff;
            padding: 8px 12px;
            margin-bottom: 3px;
            font-size: 12px;
            display: flex;
            align-items: flex-start;
            gap: 8px;
            animation: floatUp 15s linear forwards;
            opacity: 0;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(4px);
            border-left: 4px solid #FF1493;
            border-radius: 12px;
            width: fit-content;
            max-width: 85%;
            box-shadow: 0 4px 12px rgba(0,0,0,0.5);
            pointer-events: none;
        }

        @keyframes floatUp {
            0% { transform: translateY(100%); opacity: 0; }
            5% { transform: translateY(0); opacity: 1; }
            90% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-100%); opacity: 0; }
        }

        .user-avatar {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.15);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-shrink: 0;
            font-size: 10px;
        }

        .username {
            font-weight: bold;
            font-size: 11px;
            margin-bottom: 2px;
        }

        .username.you {
            color: #00ff00;
            text-shadow: 0 0 3px rgba(0, 255, 0, 0.7);
        }

        .comment-text {
            font-size: 12px;
            word-break: break-word;
            line-height: 1.3;
        }

        .comment-input-container {
            display: flex;
            align-items: center;
            gap: 6px;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.25);
            border-radius: 20px;
            padding: 0 8px;
            pointer-events: auto;
        }

        .comment-input {
            flex: 1;
            padding: 10px 0;
            border: none;
            background: transparent;
            color: #ffffff;
            font-size: 14px;
            min-width: 0;
        }

        .comment-input:focus {
            outline: none;
        }

        .emoji-inline {
            display: flex;
            gap: 4px;
            align-items: center;
        }

        .emoji-inline-btn {
            background: transparent;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background 0.2s;
            color: white;
        }

        .emoji-inline-btn:active {
            background: rgba(255, 255, 255, 0.3);
        }

        .send-btn {
            background: #FF00FF;
            color: white;
            border: none;
            width: 38px;
            height: 38px;
            border-radius: 50%;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-shrink: 0;
        }

        .send-btn:active {
            transform: scale(0.95);
        }

        .char-count {
            font-size: 10px;
            color: rgba(255, 255, 255, 0.7);
            text-align: right;
            margin-top: 4px;
            padding-right: 6px;
            pointer-events: auto;
        }

        /* --- Modal PIX (inalterado) --- */
        .donation-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 20000;
            display: flex;
            justify-content: center;
            align-items: center;
            pointer-events: none;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease, visibility 0.5s;
        }

        .donation-modal.active {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
        }

        .donation-container {
            background: transparent;
            width: 90%;
            max-width: 300px;
            padding: 20px 16px;
            color: white;
            text-align: center;
        }

        .donation-title {
            font-size: 0.9rem;
            font-weight: bold;
            margin-bottom: 15px;
            line-height: 1.4;
            text-shadow: 2px 2px 4px #000;
        }

        .profile-image-container {
            width: 150px;
            height: 150px;
            margin: 10px auto;
            border-radius: 50%;
            border: 3px solid #FF1493;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(255, 20, 147, 0.5);
        }

        .profile-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .copy-key-btn {
            display: block;
            width: 80%;
            margin: 15px auto 10px;
            padding: 10px;
            background: #ffffff;
            color: #FF1493;
            border: 2px solid #FF1493;
            border-radius: 30px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .copy-key-btn:hover {
            background: #ffe6f0;
        }

        .copy-key-btn:active {
            transform: scale(0.95);
        }

        .copy-key-btn.copied {
            background: #FF1493 !important;
            color: #ffffff !important;
            border: 2px solid #FF1493 !important;
        }

        .pink-instructions {
            background: rgba(255, 105, 180, 0.5);
            border: 2px solid #FF1493;
            border-radius: 20px;
            padding: 15px 12px;
            margin-top: 10px;
            color: #ffffff;
            font-weight: 500;
            backdrop-filter: blur(2px);
        }

        .pink-instructions strong {
            color: #fff;
            text-shadow: 2px 2px 4px #000;
            text-transform: uppercase;
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .pink-instructions p {
            text-align: left;
            margin: 5px 0;
            font-size: 12px;
            line-height: 1.6;
            color: #ffffff;
            font-weight: bold;
            text-transform: uppercase;
            text-shadow: 2px 2px 4px #000;
        }

        /* --- Overlay de carregamento inicial --- */
        #loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 30000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease;
            pointer-events: auto;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 6px solid rgba(255, 20, 147, 0.3);
            border-top-color: #FF1493;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            color: #fff;
            font-size: 18px;
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: 10px;
        }

        .dots {
            display: flex;
            gap: 5px;
        }

        .dot {
            width: 8px;
            height: 8px;
            background: #FF1493;
            border-radius: 50%;
            animation: dotPulse 1.5s infinite ease-in-out;
        }

        .dot:nth-child(2) { animation-delay: 0.2s; }
        .dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes dotPulse {
            0%, 60%, 100% { transform: scale(0.6); opacity: 0.4; }
            30% { transform: scale(1); opacity: 1; }
        }

        #retry-btn {
            background: #FF1493;
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 40px;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 2px;
            box-shadow: 0 0 20px rgba(255, 20, 147, 0.7);
            transition: transform 0.2s, box-shadow 0.2s;
            display: none; /* inicialmente oculto */
        }

        #retry-btn:active {
            transform: scale(0.95);
            box-shadow: 0 0 30px rgba(255, 20, 147, 0.9);
        }

        @media (max-width: 480px) {
            .comments-container { height: 140px; }
            .donation-container { max-width: 280px; }
            .profile-image-container { width: 140px; height: 140px; }
        }

        @media (max-width: 360px) {
            .comments-container { height: 120px; }
            .donation-container { max-width: 260px; }
            .profile-image-container { width: 130px; height: 130px; }
        }
    </style>
</head>
<body>
    <div id="particles-js"></div>

    <!-- Overlay de carregamento inicial -->
    <div id="loading-overlay">
        <div class="spinner"></div>
        <div class="loading-text">CONECTANDO</div>
        <div class="dots">
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
        </div>
        <button id="retry-btn">TENTAR NOVAMENTE</button>
    </div>

    <!-- Modal Pix -->
    <div class="donation-modal" id="donation-modal">
        <div class="donation-container">
            <div class="donation-title">D칄BORA PEDE O M칈NIMO DE 5,00 REAIS PARA FICAR NA LIVE</div>
            <div class="profile-image-container">
                <img class="profile-image" src="https://scontent-poa1-1.cdninstagram.com/v/t51.82787-15/541145964_17870386002431432_7867686677431603489_n.jpg?stp=dst-jpg_e35_tt6&_nc_cat=102&ig_cache_key=MzcwOTM1MTc5NTI1MzkxOTgzMw%3D%3D.3-ccb7-5&ccb=7-5&_nc_sid=58cdad&efg=eyJ2ZW5jb2RlX3RhZyI6InhwaWRzLjEwODB4MTQ0MC5zZHIuQzMifQ%3D%3D&_nc_ohc=MvqQP1913vkQ7kNvwF6b7GR&_nc_oc=AdkBGtLp6yUD3bfr3RjPcc1n1uFKGmZ1S5qCMYo9U_92bj6Fi9PplcN80qt1x4_cGxc&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent-poa1-1.cdninstagram.com&_nc_gid=lZLWvuEtWSPEeVjDyiUusg&oh=00_AfvGdjRBSNo0ED6Drj7krWMgL6GGqz_et5Al47vNoichkw&oe=699D7B6F" alt="Perfil">
            </div>
            <button class="copy-key-btn" id="copy-key-btn">COPIAR CHAVE PIX</button>
            <div class="pink-instructions">
                <strong>INSTRU칂칏ES:</strong>
                <p>1-COPIE A CHAVE PIX ACIMA!</p>
                <p>2-ABRA O APP DO SEU BANCO!</p>
                <p>3-COLE A CHAVE PIX!</p>
                <p>4-VALOR DE NO M칈NIMO 5,00 REAIS!</p>
                <p>5-VALORES ACIMA DE 20,00 GANHA O WHATSAPP DA MODELO + COMENTARIO COM SEU NOME!</p>
                <p>6-EM 30 SEGUNDOS, SISTEMA RECONHECE O PIX E VOC칅 VOLTA A VER A LIVE!</p>
            </div>
        </div>
    </div>

    <div class="main-container" id="main-container">
        <div class="video-container">
            <!-- V칤deo sem autoplay inicial, apenas preload -->
            <video class="video-background" id="live-video" muted playsinline preload="auto">
                <source src="https://midias.foxvideo.club/5000/5312/5312.mp4" type="video/mp4">
                <!-- Substitua pela URL do seu v칤deo quando tiver um link adequado -->
            </video>

            <!-- Hor치rio centralizado -->
            <div class="live-time" id="live-time">00:00</div>

            <!-- Visualizadores -->
            <div class="left-stats" id="left-stats">
                <div class="viewer-count">
                    <i class="fi fi-ss-eye"></i>
                    <span id="viewer-count">570</span>
                </div>
            </div>

            <!-- Badge AO VIVO -->
            <div class="right-stats" id="right-stats">
                <div class="live-badge">
                    <div class="live-pulse"></div>
                    <span>AO VIVO</span>
                </div>
            </div>

            <!-- Wrapper do 치udio -->
            <div class="audio-wrapper" id="audio-wrapper">
                <div class="audio-control pulsing inactive" id="audio-control">
                    <i class="fi fi-ss-volume audio-icon-inactive" id="audio-icon"></i>
                </div>
                <span class="audio-label" id="audio-label">AUDIO</span>
            </div>

            <!-- 츼rea de coment치rios -->
            <div class="comments-section" id="comments-section">
                <div class="comments-container" id="comments-container"></div>

                <div class="comment-input-container">
                    <input type="text" class="comment-input" id="comment-input" placeholder="Envie um coment치rio..." maxlength="50">
                    <div class="emoji-inline">
                        <button class="emoji-inline-btn" data-emoji="仇벒잺">仇벒잺</button>
                    </div>
                    <button class="send-btn" id="send-btn">
                        <i class="fi fi-ss-paper-plane"></i>
                    </button>
                </div>

                <div class="char-count" id="char-count">0/50</div>
            </div>
        </div>
    </div>

    <script>
        (function() {
            const CONFIG = {
                maxMessages: 4,
                messageInterval: 1500,
                messageDuration: 15000,
                autoMessages: false
            };

            const USER_NAMES = [
                "@jo칚o_silva", "@pedro_henrique", "@carlos_edu", "@lucas_ribeiro", 
                "@marcos_paulo", "@rafael_alves", "@guilherme_lima", "@thiago_santos",
                "@vinicius_oliveira", "@rodrigo_fernandes", "@bruno_costa", "@andre_lopes",
                "@felipe_martins", "@ricardo_souza", "@gustavo_pereira"
            ];

            const MESSAGES = [
                "@kauan fez um PIX agora! A live ficou muito mais sexy! 游댠",
                "Valeu @kauan pelo PIX! Agora a live t치 quente demais! 游꼠",
                "@kauan mandou bem no PIX! T치 tudo mais excitante! 游뱏",
                "Depois do PIX do @kauan, essa live t치 insana! 游땓",
                "@kauan 칠 o cara! O PIX dele deixou tudo mais gostoso! 游눎",
                "@naru sempre presente! Que fiel! 游녪",
                "Valeu @naru por sempre estar aqui! 游뗿",
                "@naru n칚o falta uma live! Respeito! 游삐",
                "@naru 칠 fiel demais! Toda live t치 aqui! 游녥",
                "Vou fazer um PIX de 50 reais agora! 游댠",
                "PIX de 20 reais enviado! Agora 칠 sua vez D칄BORA! 游땓",
                "Acabei de mandar 50 reais no PIX! 游꼠",
                "Que tes칚o essa live! 游땓游땓游땓",
                "Melhor live da semana! 游끥",
                "N칚o consigo parar de assistir! 游",
                "Que mulher gostosa! 游땘"
            ];

            const PIX_KEY = "debora.live@hotgirl.com";

            // Elementos
            const video = document.getElementById('live-video');
            const audioControl = document.getElementById('audio-control');
            const audioIcon = document.getElementById('audio-icon');
            const audioLabel = document.getElementById('audio-label');
            const commentInput = document.getElementById('comment-input');
            const sendBtn = document.getElementById('send-btn');
            const emojiBtns = document.querySelectorAll('.emoji-inline-btn');
            const charCount = document.getElementById('char-count');
            const viewerSpan = document.getElementById('viewer-count');
            const liveTime = document.getElementById('live-time');
            const commentsContainer = document.getElementById('comments-container');
            const copyKeyBtn = document.getElementById('copy-key-btn');
            const donationModal = document.getElementById('donation-modal');
            const mainContainer = document.getElementById('main-container');

            // Elementos do overlay
            const loadingOverlay = document.getElementById('loading-overlay');
            const retryBtn = document.getElementById('retry-btn');

            let isMuted = true; // come칞a mudo
            let viewerCount = 570;
            let messageSystem = null;
            let videoStarted = false; // s칩 ser치 true ap칩s clique no bot칚o

            // Fun칞칚o para iniciar a live (video + coment치rios)
            function startLive() {
                if (videoStarted) return;
                videoStarted = true;

                // Tocar v칤deo
                video.play().catch(e => console.log('Erro ao tentar reproduzir v칤deo:', e));

                // Iniciar coment치rios autom치ticos
                messageSystem.startAutoMessages();

                // Atualizar visualizadores (j치 estava rodando, mas pode ser iniciado aqui)
                // Se quiser, pode iniciar o intervalo de atualiza칞칚o de viewers aqui tamb칠m
            }

            // Overlay: ap칩s 2 segundos, esconde spinner e mostra bot칚o
            setTimeout(() => {
                // Esconde o spinner e texto de "conectando"
                document.querySelector('.spinner').style.display = 'none';
                document.querySelector('.loading-text').style.display = 'none';
                document.querySelector('.dots').style.display = 'none';
                // Mostra bot칚o
                retryBtn.style.display = 'block';
            }, 2000);

            // Clique no bot칚o "TENTAR NOVAMENTE"
            retryBtn.addEventListener('click', () => {
                // Remove overlay
                loadingOverlay.style.opacity = '0';
                setTimeout(() => {
                    loadingOverlay.style.display = 'none';
                }, 500); // aguarda transi칞칚o

                // Inicia a live
                startLive();
            });

            // Modal Pix persistente (se j치 foi mostrado antes)
            if (localStorage.getItem('pixModalShown') === 'true') {
                donationModal.classList.add('active');
                mainContainer.classList.add('blur');
            }

            // Atualizar hor치rio (sempre ativo)
            function updateLiveTime() {
                const now = new Date();
                const brasiliaTime = new Date(now.toLocaleString('en-US', { timeZone: 'America/Sao_Paulo' }));
                const hours = String(brasiliaTime.getHours()).padStart(2, '0');
                const minutes = String(brasiliaTime.getMinutes()).padStart(2, '0');
                liveTime.textContent = `${hours}:${minutes}`;
            }
            updateLiveTime();
            setInterval(updateLiveTime, 60000);

            // Sistema de mensagens
            class MessageSystem {
                constructor() {
                    this.messages = [];
                    this.nextId = 0;
                    this.container = commentsContainer;
                }

                addMessage(user, text) {
                    this.nextId++;
                    const messageId = this.nextId;

                    const comment = document.createElement('div');
                    comment.className = 'comment';
                    comment.id = `comment-${messageId}`;

                    const delay = this.messages.length * 200;
                    comment.style.animationDelay = `${delay}ms`;

                    const usernameClass = user === "@voc칡" ? 'username you' : 'username';

                    comment.innerHTML = `
                        <div class="user-avatar">
                            <i class="fi fi-ss-user"></i>
                        </div>
                        <div class="comment-content">
                            <div class="${usernameClass}">${user}</div>
                            <div class="comment-text">${text}</div>
                        </div>
                    `;

                    this.container.appendChild(comment);
                    this.messages.push(messageId);

                    setTimeout(() => {
                        this.removeMessage(messageId);
                    }, CONFIG.messageDuration + delay);

                    this.manageMessageLimit();

                    return messageId;
                }

                addUserMessage(text) {
                    return this.addMessage("@voc칡", text);
                }

                removeMessage(messageId) {
                    const element = document.getElementById(`comment-${messageId}`);
                    if (element) element.remove();
                    this.messages = this.messages.filter(id => id !== messageId);
                }

                manageMessageLimit() {
                    if (this.messages.length > CONFIG.maxMessages) {
                        const oldestId = this.messages.shift();
                        this.removeMessage(oldestId);
                    }
                }

                generateRandomMessage() {
                    const user = USER_NAMES[Math.floor(Math.random() * USER_NAMES.length)];
                    const text = MESSAGES[Math.floor(Math.random() * MESSAGES.length)];
                    return this.addMessage(user, text);
                }

                startAutoMessages() {
                    if (this.autoInterval) clearInterval(this.autoInterval);
                    this.autoInterval = setInterval(() => this.generateRandomMessage(), CONFIG.messageInterval);
                }

                stopAutoMessages() {
                    if (this.autoInterval) {
                        clearInterval(this.autoInterval);
                        this.autoInterval = null;
                    }
                }
            }

            messageSystem = new MessageSystem();

            // Atualizar visualizadores (come칞a imediatamente, mas s칩 atualiza n칰meros)
            function updateViewerCount() {
                let min = 570, max = 577;
                let newCount;
                do {
                    newCount = Math.floor(Math.random() * (max - min + 1)) + min;
                } while (newCount === viewerCount);
                viewerCount = newCount;
                viewerSpan.textContent = viewerCount;
            }
            setInterval(updateViewerCount, 5000);

            // Modal Pix ap칩s 2 minutos (s칩 se j치 n칚o tiver sido mostrado)
            setTimeout(() => {
                if (localStorage.getItem('pixModalShown') !== 'true') {
                    donationModal.classList.add('active');
                    mainContainer.classList.add('blur');
                    localStorage.setItem('pixModalShown', 'true');
                }
            }, 2 * 60 * 1000);

            // Bot칚o copiar Pix
            copyKeyBtn.addEventListener('click', () => {
                navigator.clipboard.writeText(PIX_KEY).then(() => {
                    const originalText = copyKeyBtn.textContent;
                    copyKeyBtn.classList.add('copied');
                    copyKeyBtn.textContent = "COPIADO!";
                    setTimeout(() => {
                        copyKeyBtn.classList.remove('copied');
                        copyKeyBtn.textContent = originalText;
                    }, 2000);
                }).catch(() => {
                    alert('Chave Pix: ' + PIX_KEY);
                });
            });

            // Controle de 치udio (toggle mute) - s칩 funciona ap칩s in칤cio da live
            function toggleAudio() {
                if (!videoStarted) return; // s칩 permite se a live j치 come칞ou
                if (!video) return;
                isMuted = !isMuted;
                video.muted = isMuted;

                if (isMuted) {
                    audioIcon.className = 'fi fi-ss-volume audio-icon-inactive';
                    audioControl.classList.add('inactive');
                } else {
                    audioIcon.className = 'fi fi-ss-volume';
                    audioIcon.classList.remove('audio-icon-inactive');
                    audioControl.classList.remove('inactive');
                }

                audioControl.classList.remove('pulsing');
            }

            audioControl.addEventListener('click', toggleAudio);

            // Enviar coment치rio - s칩 ap칩s in칤cio
            function sendComment() {
                if (!videoStarted) return;
                const text = commentInput.value.trim();
                if (!text) return;
                messageSystem.addUserMessage(text);
                commentInput.value = '';
                charCount.textContent = '0/50';
            }

            sendBtn.addEventListener('click', sendComment);
            commentInput.addEventListener('keypress', (e) => e.key === 'Enter' && sendComment());

            emojiBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    if (!videoStarted) return;
                    const emoji = btn.getAttribute('data-emoji');
                    messageSystem.addUserMessage(emoji);
                });
            });

            commentInput.addEventListener('input', function() {
                charCount.textContent = `${this.value.length}/50`;
            });

            // Pausar coment치rios ao mudar de aba (s칩 se j치 iniciado)
            document.addEventListener('visibilitychange', () => {
                if (!videoStarted) return;
                if (document.hidden) {
                    messageSystem.stopAutoMessages();
                } else {
                    messageSystem.startAutoMessages();
                }
            });

            // Part칤culas (sempre ativas)
            particlesJS('particles-js', {
                particles: {
                    number: { value: 40, density: { enable: true, value_area: 800 } },
                    color: { value: "#ffffff" },
                    shape: { type: "circle" },
                    opacity: { value: 0.2, random: true, anim: { enable: true, speed: 1 } },
                    size: { value: 2, random: true, anim: { enable: true, speed: 2 } },
                    line_linked: { enable: true, distance: 120, color: "#ffffff", opacity: 0.1, width: 1 },
                    move: { enable: true, speed: 0.8, direction: "none", random: true }
                },
                interactivity: {
                    detect_on: "canvas",
                    events: {
                        onhover: { enable: true, mode: "repulse" },
                        onclick: { enable: true, mode: "push" },
                        resize: true
                    }
                }
            });

            // Monitorar erro de carregamento do v칤deo
            video.addEventListener('error', function() {
                console.error('Erro ao carregar o v칤deo. Verifique a URL ou as permiss칫es do servidor.');
            });
        })();
    </script>
</body>
</html>
